# Story 3.3: Device Status & Heartbeat Protocol

**Epic:** 3 - Device Communication Layer
**Status:** ❌ TODO

## Description
Establish a comprehensive heartbeat and health monitoring protocol that tracks all ESP32-CAM and PIR sensor devices, detects failures, and maintains an authoritative device registry. Enables real-time visibility into system health and automated failure detection.

## Goals
- Track online/offline status of all devices in real-time
- Detect device failures within 2 minutes
- Maintain device registry with metadata (version, uptime, health metrics)
- Provide dashboard visualization of device status
- Alert on device failures or degraded health
- Support manual device management (remove, reassign, firmware check)

## Key Components
- Heartbeat protocol (60-second interval)
- Device health scoring (based on uptime, errors, RSSI)
- Failure detection and alerting
- Device registry database (SQLite/PostgreSQL)
- REST API for device management
- Dashboard UI showing device map

## Acceptance Criteria
- [ ] All devices send heartbeat every 60 seconds
- [ ] Offline detection within 120 seconds
- [ ] Health metrics tracked (uptime, RSSI, errors, memory)
- [ ] Dashboard shows device status in real-time
- [ ] Alerts sent when devices go offline
- [ ] API supports device CRUD operations
- [ ] Historical health data stored for 30 days

## Dependencies
- Story 3.1 (ESP32 API)
- Story 3.2 (ESP32 ↔ Pi Communication)
- Story 5.2 (Dashboard)
