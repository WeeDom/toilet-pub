# Story 1.7: OpenProject Installation & Integration

**Epic:** 1 - Infrastructure Enhancement
**Status:** ❌ TODO

## Description
Install OpenProject project management platform on the same EC2 server as the WordPress dual-stack, integrate it with the existing nginx reverse proxy for HTTPS access via `projects.guard-e-loo.co.uk`, and extend the `manage.sh` script to include OpenProject lifecycle management. This provides centralized project tracking, task management, and team collaboration for Guard-e-loo development and deployment operations.

## Goals
- OpenProject running in Docker container on same server
- HTTPS access via `projects.guard-e-loo.co.uk` subdomain
- Integrated with existing SSL multi-domain certificate
- Managed via extended `manage.sh` script
- Persistent PostgreSQL database for OpenProject data
- Connected to existing proxy network
- Backup automation for OpenProject database
- Single sign-on ready (optional future enhancement)
- Resource-efficient configuration (shared server)

## Technical Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                    Internet (HTTPS)                             │
└────────────────────────┬────────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────────────┐
│              Nginx Reverse Proxy (Port 443)                     │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │  SSL Termination (Let's Encrypt Multi-Domain Cert)       │  │
│  │  - www.guard-e-loo.co.uk → Production WordPress          │  │
│  │  - staging.guard-e-loo.co.uk → Staging WordPress         │  │
│  │  - op.guard-e-loo.co.uk → Operations Dashboard           │  │
│  │  - projects.guard-e-loo.co.uk → OpenProject (NEW)        │  │
│  └──────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
           │               │               │               │
           ▼               ▼               ▼               ▼
    ┌──────────┐   ┌──────────┐   ┌──────────┐   ┌──────────────┐
    │Production│   │ Staging  │   │   Ops    │   │ OpenProject  │
    │WordPress │   │WordPress │   │Dashboard │   │              │
    │  Stack   │   │  Stack   │   │(Future)  │   │  Port 8080   │
    └──────────┘   └──────────┘   └──────────┘   └──────┬───────┘
                                                          │
                                                          ▼
                                                   ┌──────────────┐
                                                   │ PostgreSQL   │
                                                   │ Database     │
                                                   └──────────────┘
```

## Technical Implementation

### Directory Structure

**New OpenProject directory:**
```
/home/weedom/toilet/
├── production/          # Existing
├── staging/             # Existing
├── proxy/               # Existing
├── openproject/         # NEW
│   ├── docker-compose.yml
│   ├── .env
│   ├── backup-db.sh
│   ├── pgdata/          # PostgreSQL data (volume mount)
│   └── backups/         # Database backups
└── manage.sh            # Extended to include OpenProject
```

### OpenProject Docker Compose Configuration

**File: `openproject/docker-compose.yml`**
```yaml
version: '3.8'

services:
  postgres:
    image: postgres:13
    container_name: openproject-postgres
    restart: always
    environment:
      POSTGRES_DB: ${POSTGRES_DB:-openproject}
      POSTGRES_USER: ${POSTGRES_USER:-openproject}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
    volumes:
      - pgdata:/var/lib/postgresql/data
      - ./backups:/backups
    networks:
      - openproject-network
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U openproject"]
      interval: 10s
      timeout: 5s
      retries: 5

  openproject:
    image: openproject/community:13
    container_name: openproject-web
    restart: always
    depends_on:
      postgres:
        condition: service_healthy
    environment:
      # Database configuration
      DATABASE_URL: "postgres://${POSTGRES_USER:-openproject}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB:-openproject}"

      # Rails configuration
      RAILS_CACHE_STORE: "memcache"
      RAILS_MIN_THREADS: 4
      RAILS_MAX_THREADS: 16

      # OpenProject configuration
      OPENPROJECT_HOST__NAME: projects.guard-e-loo.co.uk
      OPENPROJECT_HTTPS: "true"
      OPENPROJECT_HSTS: "true"

      # Email configuration (optional - configure later)
      # EMAIL_DELIVERY_METHOD: "smtp"
      # SMTP_ADDRESS: "smtp.sendgrid.net"
      # SMTP_PORT: "587"
      # SMTP_AUTHENTICATION: "plain"
      # SMTP_DOMAIN: "guard-e-loo.co.uk"
      # SMTP_USER_NAME: ${SMTP_USER}
      # SMTP_PASSWORD: ${SMTP_PASSWORD}
      # SMTP_ENABLE_STARTTLS_AUTO: "true"

      # Cache configuration
      OPENPROJECT_CACHE__MEMCACHE__SERVER: "memcached:11211"

      # Session configuration
      OPENPROJECT_SESSION__STORE: "cache_store"

      # Security
      SECRET_KEY_BASE: ${SECRET_KEY_BASE}

    volumes:
      - opdata:/var/openproject/assets
    networks:
      - openproject-network
      - proxy-network
    ports:
      - "8080:8080"  # Internal port, accessed via proxy
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080/health_checks/default"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 90s

  memcached:
    image: memcached:1.6-alpine
    container_name: openproject-memcached
    restart: always
    networks:
      - openproject-network

networks:
  openproject-network:
    driver: bridge
  proxy-network:
    external: true

volumes:
  pgdata:
  opdata:
```

**File: `openproject/.env`**
```bash
# PostgreSQL Configuration
POSTGRES_DB=openproject
POSTGRES_USER=openproject
POSTGRES_PASSWORD=CHANGE_THIS_SECURE_PASSWORD_123

# OpenProject Secret Key (generate with: openssl rand -hex 64)
SECRET_KEY_BASE=GENERATE_THIS_WITH_OPENSSL_RAND_HEX_64

# Optional: SMTP Configuration (for email notifications)
# SMTP_USER=apikey
# SMTP_PASSWORD=your_sendgrid_api_key
```

### Nginx Proxy Configuration Update

**File: `proxy/nginx.conf` (add new server block)**

Add this server block to handle OpenProject routing:

```nginx
    # OpenProject HTTPS server (projects.guard-e-loo.co.uk)
    server {
        listen 443 ssl http2;
        server_name projects.guard-e-loo.co.uk;

        ssl_certificate /etc/letsencrypt/live/guard-e-loo.co.uk/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/guard-e-loo.co.uk/privkey.pem;

        # OpenProject-specific headers
        proxy_set_header X-Forwarded-Host $host;
        proxy_set_header X-Forwarded-Server $host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;

        # WebSocket support for OpenProject
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";

        # Increase timeouts for long operations
        proxy_read_timeout 600s;
        proxy_connect_timeout 600s;
        proxy_send_timeout 600s;

        # Increase buffer sizes
        proxy_buffering off;
        proxy_request_buffering off;

        location / {
            proxy_pass http://openproject-web:8080;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
        }

        # Health check endpoint (optional)
        location /health {
            access_log off;
            proxy_pass http://openproject-web:8080/health_checks/default;
        }
    }
```

**Also update HTTP redirect section:**
```nginx
    # HTTP to HTTPS redirect
    server {
        listen 80;
        server_name guard-e-loo.co.uk www.guard-e-loo.co.uk staging.guard-e-loo.co.uk op.guard-e-loo.co.uk projects.guard-e-loo.co.uk;

        # ACME challenge location for Let's Encrypt
        location /.well-known/acme-challenge/ {
            root /opt/guard-e-loo-ssl/webroot;
            try_files $uri =404;
        }

        # Redirect all other HTTP requests to HTTPS
        location / {
            return 301 https://$server_name$request_uri;
        }
    }
```

### SSL Certificate Update

**Update SSL domain list in `ssl-multi-domain.sh`:**

```bash
# Current domains
ALL_DOMAINS="guard-e-loo.co.uk,www.guard-e-loo.co.uk,staging.guard-e-loo.co.uk,op.guard-e-loo.co.uk"

# Updated with projects subdomain
ALL_DOMAINS="guard-e-loo.co.uk,www.guard-e-loo.co.uk,staging.guard-e-loo.co.uk,op.guard-e-loo.co.uk,projects.guard-e-loo.co.uk"
```

**Regenerate certificate:**
```bash
sudo ./ssl-multi-domain.sh init
# Or if certificate already exists:
sudo certbot certonly --standalone --force-renewal \
  --email admin@guard-e-loo.co.uk \
  --agree-tos \
  --domains "guard-e-loo.co.uk,www.guard-e-loo.co.uk,staging.guard-e-loo.co.uk,op.guard-e-loo.co.uk,projects.guard-e-loo.co.uk" \
  --cert-name "guard-e-loo.co.uk"
```

### Extended Management Script

**File: `manage.sh` updates**

Add OpenProject support to existing commands:

```bash
#!/bin/bash

# Add OpenProject directory variable
OPENPROJECT_DIR="$SCRIPT_DIR/openproject"

# Update show_usage function
show_usage() {
    echo "Guard-e-Loo Website Management"
    echo ""
    echo "Usage: $0 <command> [options]"
    echo ""
    echo "Commands:"
    echo "  start [env]        Start services (env: production, staging, proxy, openproject, all)"
    echo "  stop [env]         Stop services (env: production, staging, proxy, openproject, all)"
    echo "  restart [env]      Restart services (env: production, staging, proxy, openproject, all)"
    echo "  status             Show status of all services"
    echo "  logs [env]         Show logs (env: production, staging, proxy, openproject)"
    echo "  backup [env]       Backup database (env: production, staging, openproject, both, all)"
    echo "  promote            Promote staging to production (with backup)"
    echo "  update             Update and restart all services"
    echo "  wp-diff            Show differences between staging and production WordPress files"
    echo "  wp-backup [env]    Backup WordPress files (env: production, staging, both)"
    echo ""
    echo "Examples:"
    echo "  $0 start all"
    echo "  $0 restart openproject"
    echo "  $0 backup all"
    echo "  $0 logs openproject"
}

# Update start_services function
start_services() {
    local env=${1:-all}

    case $env in
        production)
            log "Starting production services..."
            cd "$PRODUCTION_DIR" && docker compose up -d
            ;;
        staging)
            log "Starting staging services..."
            cd "$STAGING_DIR" && docker compose up -d
            ;;
        proxy)
            log "Starting reverse proxy..."
            cd "$PROXY_DIR" && docker compose up -d
            ;;
        openproject)
            log "Starting OpenProject..."
            cd "$OPENPROJECT_DIR" && docker compose up -d
            ;;
        all)
            log "Starting all services..."
            cd "$PRODUCTION_DIR" && docker compose up -d
            cd "$STAGING_DIR" && docker compose up -d
            cd "$OPENPROJECT_DIR" && docker compose up -d
            cd "$PROXY_DIR" && docker compose up -d
            ;;
        *)
            error "Invalid environment: $env"
            return 1
            ;;
    esac
}

# Update stop_services function
stop_services() {
    local env=${1:-all}

    case $env in
        production)
            log "Stopping production services..."
            cd "$PRODUCTION_DIR" && docker compose down
            ;;
        staging)
            log "Stopping staging services..."
            cd "$STAGING_DIR" && docker compose down
            ;;
        proxy)
            log "Stopping reverse proxy..."
            cd "$PROXY_DIR" && docker compose down
            ;;
        openproject)
            log "Stopping OpenProject..."
            cd "$OPENPROJECT_DIR" && docker compose down
            ;;
        all)
            log "Stopping all services..."
            cd "$PROXY_DIR" && docker compose down
            cd "$OPENPROJECT_DIR" && docker compose down
            cd "$STAGING_DIR" && docker compose down
            cd "$PRODUCTION_DIR" && docker compose down
            ;;
        *)
            error "Invalid environment: $env"
            return 1
            ;;
    esac
}

# Update show_status function
show_status() {
    log "Service Status Overview:"
    echo ""

    info "Production Services:"
    cd "$PRODUCTION_DIR" && docker compose ps
    echo ""

    info "Staging Services:"
    cd "$STAGING_DIR" && docker compose ps
    echo ""

    info "OpenProject:"
    cd "$OPENPROJECT_DIR" && docker compose ps
    echo ""

    info "Reverse Proxy:"
    cd "$PROXY_DIR" && docker compose ps
    echo ""
}

# Update show_logs function
show_logs() {
    local env=${1:-production}

    case $env in
        production)
            log "Production logs:"
            cd "$PRODUCTION_DIR" && docker compose logs -f
            ;;
        staging)
            log "Staging logs:"
            cd "$STAGING_DIR" && docker compose logs -f
            ;;
        proxy)
            log "Proxy logs:"
            cd "$PROXY_DIR" && docker compose logs -f
            ;;
        openproject)
            log "OpenProject logs:"
            cd "$OPENPROJECT_DIR" && docker compose logs -f
            ;;
        *)
            error "Invalid environment: $env"
            return 1
            ;;
    esac
}

# Update backup_database function
backup_database() {
    local env=${1:-both}

    case $env in
        production)
            log "Backing up production database..."
            cd "$PRODUCTION_DIR" && ./backup-db.sh
            ;;
        staging)
            log "Backing up staging database..."
            cd "$STAGING_DIR" && ./backup-db.sh
            ;;
        openproject)
            log "Backing up OpenProject database..."
            cd "$OPENPROJECT_DIR" && ./backup-db.sh
            ;;
        both)
            log "Backing up production and staging databases..."
            cd "$PRODUCTION_DIR" && ./backup-db.sh
            cd "$STAGING_DIR" && ./backup-db.sh
            ;;
        all)
            log "Backing up all databases..."
            cd "$PRODUCTION_DIR" && ./backup-db.sh
            cd "$STAGING_DIR" && ./backup-db.sh
            cd "$OPENPROJECT_DIR" && ./backup-db.sh
            ;;
        *)
            error "Invalid environment: $env"
            return 1
            ;;
    esac
}
```

### OpenProject Database Backup Script

**File: `openproject/backup-db.sh`**
```bash
#!/bin/bash
# OpenProject PostgreSQL database backup with rotation

TIMESTAMP=$(date +%Y%m%d_%H%M%S)
BACKUP_DIR="$(dirname "$0")/backups"
BACKUP_FILE="openproject_backup_${TIMESTAMP}.sql"

mkdir -p "$BACKUP_DIR"

# Load environment variables
source "$(dirname "$0")/.env"

# Export database from running PostgreSQL container
docker exec openproject-postgres pg_dump \
    -U "${POSTGRES_USER:-openproject}" \
    -d "${POSTGRES_DB:-openproject}" \
    > "$BACKUP_DIR/$BACKUP_FILE"

# Compress backup
gzip "$BACKUP_DIR/$BACKUP_FILE"

# Verify backup integrity
gunzip -t "$BACKUP_DIR/${BACKUP_FILE}.gz" && \
    echo "✓ Backup verified: ${BACKUP_FILE}.gz" || \
    echo "✗ Backup verification failed!"

# Retention policy: Keep last 7 days
find "$BACKUP_DIR" -name "*.sql.gz" -mtime +7 -delete

echo "OpenProject backup completed: ${BACKUP_FILE}.gz"
```

Make it executable:
```bash
chmod +x openproject/backup-db.sh
```

### DNS Configuration

**Add DNS A record:**
```
Type: A
Name: projects
Value: <EC2-PUBLIC-IP>
TTL: 300
```

Or if using Cloudflare/DNS provider web interface:
- Subdomain: `projects`
- Type: `A`
- Content: Your EC2 public IP address
- Proxy status: DNS only (or proxied if using Cloudflare)

### Installation Procedure

**Step 1: Create OpenProject Directory**
```bash
cd /home/weedom/toilet
mkdir -p openproject/backups
cd openproject
```

**Step 2: Create Configuration Files**
```bash
# Create docker-compose.yml (use content above)
nano docker-compose.yml

# Create .env file
nano .env

# Generate secret key
SECRET_KEY=$(openssl rand -hex 64)
echo "SECRET_KEY_BASE=$SECRET_KEY" >> .env

# Generate secure database password
DB_PASSWORD=$(openssl rand -base64 32)
sed -i "s/CHANGE_THIS_SECURE_PASSWORD_123/$DB_PASSWORD/" .env
```

**Step 3: Create Backup Script**
```bash
nano backup-db.sh
# Add content from above
chmod +x backup-db.sh
```

**Step 4: Update SSL Certificate**
```bash
cd /home/weedom/toilet

# Update ssl-multi-domain.sh to include projects.guard-e-loo.co.uk
nano ssl-multi-domain.sh
# Change ALL_DOMAINS line

# Regenerate certificate (proxy must be stopped temporarily)
./manage.sh stop proxy
sudo ./ssl-multi-domain.sh init
```

**Step 5: Update Nginx Proxy Configuration**
```bash
nano proxy/nginx.conf
# Add OpenProject server block (see above)
```

**Step 6: Update manage.sh**
```bash
nano manage.sh
# Add OpenProject support (see above)
chmod +x manage.sh
```

**Step 7: Create Proxy Network (if not exists)**
```bash
docker network create proxy-network 2>/dev/null || true
```

**Step 8: Start Services**
```bash
# Start OpenProject
./manage.sh start openproject

# Wait for OpenProject to initialize (first start takes 2-3 minutes)
echo "Waiting for OpenProject to initialize..."
sleep 180

# Check OpenProject logs
./manage.sh logs openproject

# Start proxy
./manage.sh start proxy
```

**Step 9: Verify Installation**
```bash
# Check container status
./manage.sh status

# Test OpenProject health
curl http://localhost:8080/health_checks/default

# Test HTTPS access
curl -I https://projects.guard-e-loo.co.uk
```

**Step 10: Initial OpenProject Setup**
1. Access `https://projects.guard-e-loo.co.uk`
2. Default admin credentials:
   - Username: `admin`
   - Password: `admin`
3. **IMMEDIATELY** change admin password
4. Configure project settings
5. Create user accounts
6. Set up first project (e.g., "Guard-e-loo Development")

### Automated Backup Cron Job

**Add to crontab:**
```bash
# OpenProject database backup (daily at 3:30 AM)
30 3 * * * /home/weedom/toilet/openproject/backup-db.sh >> /home/weedom/toilet/openproject/backups/backup.log 2>&1
```

Install cron job:
```bash
(crontab -l 2>/dev/null; echo "30 3 * * * /home/weedom/toilet/openproject/backup-db.sh >> /home/weedom/toilet/openproject/backups/backup.log 2>&1") | crontab -
```

## Acceptance Criteria

- [ ] **OpenProject Installed**: Community edition running in Docker
- [ ] **Database**: PostgreSQL 13 with persistent storage
- [ ] **HTTPS Access**: Accessible at `https://projects.guard-e-loo.co.uk`
- [ ] **SSL Certificate**: Multi-domain cert includes projects subdomain
- [ ] **Proxy Integration**: Nginx reverse proxy routes correctly
- [ ] **manage.sh Extended**: OpenProject commands integrated
- [ ] **Backup Script**: PostgreSQL backup with 7-day rotation
- [ ] **Cron Job**: Daily automated backups configured
- [ ] **Health Checks**: Container health checks functioning
- [ ] **WebSocket Support**: Real-time updates working
- [ ] **Admin Access**: Can log in and create projects
- [ ] **Performance**: Responsive under typical load
- [ ] **Resource Usage**: RAM usage <2GB for OpenProject stack
- [ ] **Persistent Data**: Data survives container restarts
- [ ] **Network Isolation**: OpenProject network separate from WordPress
- [ ] **Documentation**: Installation and usage documented

## Dependencies
- Story 1.1 (Docker dual-stack) - Infrastructure foundation
- Story 1.2 (SSL automation) - Certificate management
- Story 6.1 (HTTPS/SSL) - Proxy configuration
- Docker Engine 20.10+
- Docker Compose v2
- Minimum 2GB free RAM
- Minimum 10GB free disk space
- DNS access to create `projects` subdomain

## Resource Considerations

**Server Requirements:**
- Additional RAM: 1.5-2GB for OpenProject
- Additional Disk: 5-10GB for PostgreSQL data
- CPU: Minimal additional load (shared with WordPress)

**Optimization Tips:**
```yaml
# Reduce OpenProject memory footprint in docker-compose.yml
environment:
  RAILS_MIN_THREADS: 2  # Reduced from 4
  RAILS_MAX_THREADS: 8  # Reduced from 16

# Add memory limits
deploy:
  resources:
    limits:
      memory: 2G
    reservations:
      memory: 1G
```

**Monitor resource usage:**
```bash
# Check OpenProject container stats
docker stats openproject-web openproject-postgres

# Check system memory
free -h

# Check disk usage
df -h
```

## Post-Installation Configuration

### Configure Email Notifications (Optional)

Edit `openproject/.env`:
```bash
EMAIL_DELIVERY_METHOD=smtp
SMTP_ADDRESS=smtp.sendgrid.net
SMTP_PORT=587
SMTP_AUTHENTICATION=plain
SMTP_DOMAIN=guard-e-loo.co.uk
SMTP_USER_NAME=apikey
SMTP_PASSWORD=your_sendgrid_api_key
SMTP_ENABLE_STARTTLS_AUTO=true
```

Restart OpenProject:
```bash
./manage.sh restart openproject
```

### Create Initial Project Structure

**Guard-e-loo Projects:**
1. **Hardware Development**
   - ESP32-CAM firmware
   - Pi gateway development
   - PIR sensor integration

2. **Infrastructure**
   - WordPress platform
   - SSL management
   - Ansible automation

3. **Security & Compliance**
   - Police key encryption
   - GDPR compliance
   - Privacy features

4. **Field Deployment**
   - Site installations
   - Testing & validation
   - Customer support

### User Management

**Create user accounts:**
1. Admin → Users & Permissions → Users
2. Add team members with appropriate roles:
   - **Project Admin**: Full project access
   - **Member**: Can create work packages, edit
   - **Reader**: Read-only access

**Set up teams:**
1. Admin → Users & Permissions → Groups
2. Create groups: Development, Operations, Management
3. Assign users to groups
4. Grant group permissions per project

## Troubleshooting

**OpenProject won't start:**
```bash
# Check logs
docker logs openproject-web

# Check PostgreSQL
docker logs openproject-postgres

# Verify network
docker network inspect proxy-network

# Check port conflicts
sudo netstat -tulpn | grep 8080
```

**502 Bad Gateway:**
```bash
# Restart OpenProject
./manage.sh restart openproject

# Check proxy logs
./manage.sh logs proxy

# Verify container can reach proxy network
docker exec openproject-web ping proxy
```

**Out of memory:**
```bash
# Check memory usage
docker stats

# Reduce Rails threads in docker-compose.yml
# Restart with: ./manage.sh restart openproject
```

**Database connection errors:**
```bash
# Check PostgreSQL health
docker exec openproject-postgres pg_isready

# Verify credentials in .env
cat openproject/.env

# Recreate database (WARNING: loses data)
./manage.sh stop openproject
docker volume rm openproject_pgdata
./manage.sh start openproject
```

## Future Enhancements

- [ ] **SSO Integration**: Single sign-on with WordPress
- [ ] **API Integration**: Automate project creation from deployments
- [ ] **Custom Plugins**: Guard-e-loo specific workflows
- [ ] **Backup to S3**: Offsite backup storage
- [ ] **Monitoring**: Prometheus metrics for OpenProject
- [ ] **Load Balancing**: Multiple OpenProject instances
- [ ] **LDAP Integration**: Corporate directory authentication
- [ ] **Custom Themes**: Guard-e-loo branding

## Notes

- OpenProject uses significant RAM (1.5-2GB) - monitor server resources
- First startup takes 2-3 minutes while database initializes
- Default admin credentials **must** be changed immediately
- WebSocket support requires HTTP/1.1 upgrade headers in nginx
- PostgreSQL backups are plain SQL dumps (can restore easily)
- Consider S3 backup for production deployments
- OpenProject Community edition is free but has feature limitations
- Upgrading OpenProject requires stopping services (plan maintenance window)
- Database migrations run automatically on container start
- Memcached improves performance significantly (included in compose)

## Related Files

```
/home/weedom/toilet/
├── openproject/
│   ├── docker-compose.yml       # OpenProject stack definition
│   ├── .env                     # Configuration and secrets
│   ├── backup-db.sh             # PostgreSQL backup script
│   ├── pgdata/                  # PostgreSQL data (Docker volume)
│   └── backups/                 # Backup storage
├── proxy/
│   └── nginx.conf               # Updated with OpenProject routing
├── manage.sh                    # Extended with OpenProject commands
└── ssl-multi-domain.sh          # Updated with projects subdomain
```
